{% extends 'base.html' %}
{% block content %}
    <div class="container mb-5 text-center">
        <h1 class="display-4 mb-4 hero-login-h3">Patient Dashboard</h1>

        <div class="row">
            <!-- Personal Info Section -->
            <div class="col-md-6">
                <div class="card mb-4">
                    <div class="card-body">
                        <h2 class="card-title section-title">Personal Information</h2>
                        <table class="table">
                            <tbody>
                            <tr>
                                <th>Name</th>
                                <td>{{ patient.get_full_name }}</td>
                            </tr>
                            <tr>
                                <th>Email</th>
                                <td>{{ patient.user.email }}</td>
                            </tr>
                            <tr>
                                <th>Phone</th>
                                <td>{{ patient.phone_number }}</td>
                            </tr>
                            <tr>
                                <th>PIN</th>
                                <td>{{ patient.civil_number }}</td>
                            </tr>
                            <!-- Display other personal info fields here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <!-- Appointments Section -->
            <div class="col-md-6">
                <div class="card mb-4">
                    <div class="card-body">
                        <h2 class="card-title section-title">Appointments</h2>
                        <hr>
                        <a class="btn btn-primary mb-3" href="{% url 'schedule appointment' %}">Schedule Appointment</a>
                        <br>
                        {% if appointments %}
                            <table class="table">
                                <thead>
                                <tr>
                                    <th>Status</th>
                                    <th>Date</th>
                                    <th>Time</th>
                                    <th>Actions</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for appointment in appointments %}
                                    <tr>
                                        <td>{{ appointment.status }}</td>
                                        <td>{{ appointment.for_date }}</td>
                                        <td>{{ appointment.for_time }}</td>
                                        <td>
                                            {% if appointment.status == 'Pending' %}
                                                <a href="{% url 'cancel appointment' pk=appointment.pk %}"
                                                   class="btn btn-danger"
                                                   onclick="return confirm('Are you sure you want to cancel this appointment?');">Cancel</a>
                                            {% else %}
                                                <!-- Handle other statuses or display a different button -->
                                            {% endif %}
                                        </td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        {% else %}
                            <p class="lead text-secondary">No appointments scheduled.</p>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        <div class="row">

        <!-- Oncology Status Section -->
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-body">
                    <h2 class="card-title section-title">Oncology Status</h2>
                    {% if oncology_status %}
                        <table class="table">
                            <tbody>
                            <tr>
                                <th>Histology Diagnosis</th>
                                <td>{{ oncology_status.histology_diagnose }}</td>
                            </tr>
                            <tr>
                                <th>TNM</th>
                                <td>{{ oncology_status.tnm }}</td>
                            </tr>
                            <tr>
                                <th>Stage</th>
                                <td>{{ oncology_status.get_stage_display }}</td>
                            </tr>
                            <!-- Display other oncology status fields here -->
                            </tbody>
                        </table>
                    {% else %}
                        <p class="lead text-secondary">No oncology status available.</p>
                    {% endif %}
                </div>
            </div>
        </div>


        <!-- Treatment Plan Section -->
            <div class="col-md-6">
                <div class="card mb-4">
                    <div class="card-body">
                        <h2 class="card-title section-title">Treatment Plan</h2>
                        {% if treatment_plan %}
                            <table class="table">
                                <tbody>
                                <tr>
                                    <th>Plan Date</th>
                                    <td>{{ treatment_plan.plan_date }}</td>
                                </tr>
                                <tr>
                                    <th>Treatment Description</th>
                                    <td>{{ treatment_plan.treatment_description }}</td>
                                </tr>
                                <tr>
                                    <th>Medication</th>
                                    <td>{{ treatment_plan.medication }}</td>
                                </tr>
                                <!-- Display other treatment plan fields here -->
                                </tbody>
                            </table>
                        {% else %}
                            <p class="lead text-secondary">No treatment plan available.</p>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
